# HTTP란?
- Hypertext Transfer Protocol(하이퍼 텍스트 전송 프로토콜)의 약자
- 웹 브라우저와 웹 서버 사이에서 HTML과 같은 문서를 주고받게 해주는 가장 기초적인 통신 규약
- 서버의 80번 포트 사용(클라이언트는 80번 포트로 요청)
- HTTP의 특징 : 무상태성(Stateless)

### 무상태성(Stateless)이란?
- 이전의 상태정보나 현재 통신의 상태를 저장하지 않음(HTTP는 요청을 보내면 응답을 하고 연결을 끊기 때문)  
- 무상태성의 장점
  - 연결 상태가 지속되지 않기 때문에 쓸데없는 네트워크 자원 낭비를 줄임
- 무상태성의 단점
  - 클라이언트의 상태(ex. 로그인 상태)를 유지시켜줄 수 없음  
  → 쿠키나 세션 등으로 단점 극복

# HTTP 통신의 작동 원리
- 클라이언트가 HTTP messages 양식에 맞춰 요청(Requests)을 보냄
- 서버도 HTTP messages 양식에 맞춰 응답(Responses)

![HTTP messages](https://user-images.githubusercontent.com/83861190/139012342-e36dd8cf-ab61-40cb-a3e3-a388f51f8ab3.png)

- Start line : 요청이나 응답의 상태
  - 요청일 때 – HTTP method, 요청 대상(URL, URI 등), HTTP 버전
  - 응답일 때 – HTTP 버전, 상태 코드, 상태 텍스트
- HTTP headers : 요청을 지정하거나, body를 설명하는 내용
- Empty line : 헤더와 본문을 구분하는 빈 줄
- Body : 요청 혹은 응답과 관련된 데이터

# HTTP의 문제점
1. 서버에 보내는 요청이 암호화되지 않음(제 3자가 정보를 탈취할 수 있음)
2. 현재 접속한 사이트가 안전한 사이트인지 알 수 없음  
  → HTTPS를 통해 2가지 문제 해결
  

# HTTPS란?
- HTTPS : HTTP + Secure(보안)  
          HTTP에 데이터 암호화가 추가된 프로토콜
- 443번 포트 사용
- HTTPS의 장점(HTTP와의 차이점)
1. 사용자가 서버에 보내는 정보를 제 3자가 볼 수 없다.
2. 접속한 사이트가 믿을 만한 곳인지 알려준다.

# 암호화 방식의 종류
### 1. 대칭 키 암호화 방식  
![대칭키암호화](https://user-images.githubusercontent.com/83861190/139014151-50514e23-3728-4119-9419-3fdc0748966a.png)
- 암호화/복호화 하기 위해 양쪽이 같은 키를 사용함  
### 대칭 키 암호화 방식의 문제점
- 최초에 한 번은 어느 한쪽에서 키를 전송해야 함
- 양쪽의 동일한 대칭 키를 애초에 어떻게 (안전하게) 공유하느냐?
- 이 과정에서 중간에 누군가가 키를 탈취한다면? 
  → 암호화를 하는 의미가 없어짐
  → 비대칭 키 암호화 방식 도입  

### 2. 비대칭 키 암호화 방식  
![공개키,개인키 암호화](https://user-images.githubusercontent.com/83861190/139014164-bf73a0a6-51b1-4242-aa69-ad6217d1099c.png)
- 공개키 : 모두에게 공개 가능한 키
- 개인키 : 나만 알고 있는 키(일반적으로 서버가 갖고 있음)
- 공개키로 암호화를 하면 개인키로만 복호화 가능
- 개인키로 암호화를 하면 공개키로만 복호화 가능
- 사용자는 공개키로 암호화해서 서버에 요청(3자가 탈취해도 같은 공개키로는 복호화 불가능)
- 서버는 개인키로 복호화  
  #### → 1번 문제(제 3자가 정보를 탈취할 가능성) 해결  
- 서버에서 보내는 응답은 그 일부가 개인키로 암호화가 됨
- 사용자가 공개키로 풀어볼 수 있는 것 = 서버가 개인키로 암호화한 정보들 뿐
  - 전혀 다른 서버에서 온 정보들은 기존 서버의 공개키로 풀리지 않음
- 신뢰할 수 있는 기관에서 우리가 원하는 사이트(네이버 등)의 공개키를 검증해준다면?  
  → 이것을 기준으로 사용자는 이 사이트가 안전하다고 신뢰할 수 있다.(2번 문제 해결)
- CA(Certificate Authority) : 네이버와 같은 사이트들의 공개키를 인증해주는 공인된 인증기관
- CA의 인증을 받은 곳의 공개키는 신뢰할 만한 사이트
- 크롬, 사파리 등의 브라우저에는 CA들의 목록이 내장되어 있음
- 브라우저는 서버에 정보를 보내기 전 무작위의 데이터를 서버에 보냄
- 서버는 무작위의 데이터를 서버의 (CA인증을 받은)인증서와 함께 응답으로 보냄  
  #### → handshake(탐색과정)
- 브라우저는 내장된 CA정보를 통해 이 인증서가 진짜인지 검증(비대칭키)
- CA의 인증을 받은 인증서 → 해당 CA의 개인키로 암호화가 되어 있음
- 인증서가 진짜라면 브라우저에 내장된 CA의 공개키로 복호화 가능 → 검증된 사이트
  #### → 2번 문제(현재 접속한 사이트가 안전한가) 해결  

### 만약 CA 인증을 받지 못한 사이트라면?
<img src="https://user-images.githubusercontent.com/83861190/139016221-edbe952e-10f9-4139-af85-723ef941302c.png" width="400" height="200"/>  

# HTTP vs HTTPS 차이점(결론)
- HTTPS가 HTTP보다 (보안이) 더 안전하다
- 무엇이 더 안전한가?
1. 사용자가 서버에 보내는 정보를 제 3자가 볼 수 없다.
2. 접속한 사이트가 믿을 만한 곳인지 알려준다.
